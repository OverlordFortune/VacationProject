@model Vacations.Models.EmployeeViewModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    string url = "https://teamresponse418storage.blob.core.windows.net/photos/";
}

@using (Html.BeginForm("Edit", "Admin", FormMethod.Post, new { @class = "form-horizontal", role = "form", enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => m.EmployeeID)
    <div class="container m-0 py-3">
        <form style="color:white;">
            <div class="container pb-5 text-light-grey">
                <div class="row">
                    <div class="container-fluid border border-bottom-0 border-grey container-rounded-top bg-global text-white p-2 py-2">
                        <strong>Edit Profile</strong>
                    </div>
                </div>
                <div class="row">
                    <div class="col-4 border border-bottom-0 border-grey  bg-dark pt-1">
                        <div class="form-group container">
                            <div class="row m-auto my-auto">
                                <div class="float-left my-auto">
                                    <img src="@string.Format($"{url}{Model.EmployeeID}.jpg")" id="imgProfile" class="m-auto rounded-circle profilePhoto" style="object-fit: cover;height:80px;width:80px; margin-bottom:30px;" />
                                </div>
                                <div class="fileinputs">
                                    <input type="file" class="file" id="inputFile" style="opacity:0; width:120px !important; height:40px !important;margin-top:25px; margin-left:60px" name="photo" />
                                    <div class="fakefile" style="margin-top:25px; padding-right:15px; margin-left:50px;">
                                        <button class="my-auto m-1 button-add-photo ml-2" style="width:120px !important;">Edit photo</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-4 border-top border-grey  bg-dark pt-1">
                        <div class="form-group container">
                            @Html.LabelFor(m => m.BirthDate, new { @class = "control-label " })
                            @Html.ValidationMessageFor(m => m.BirthDate, "", new { @class = "Denied" })
                            <input class="form-control bg-dark border-grey colorWhite" type="date" autocomplete="off" id="datepickerBirthDate" name="BirthDate" value="@Model.BirthDate.ToString("yyyy-MM-dd")">
                        </div>
                    </div>
                    <div class="col-4 border-right border-top border-grey   bg-dark pt-1">
                        <div class="form-group container">
                            <label>role</label>

                            @Html.DropDownList("aspNetRolesSelectList", null, null, new { @class = "form-control bg-dark border-grey colorWhite", autocomplete = "off" })
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-4  border-left border-right  border-grey  bg-dark">
                        <div class="form-group container">
                            @Html.LabelFor(m => m.Name, new { @class = "control-label" })
                            @Html.ValidationMessageFor(m => m.Name, "", new { @class = "Denied" })
                            @Html.TextBoxFor(m => m.Name, new { @class = "form-control bg-dark border-grey colorWhite", placeholder = "Enter Name", autocomplete = "off" })
                        </div>

                    </div>

                    <div class="col-4  bg-dark ">
                        <div class="form-group container">
                            @Html.LabelFor(m => m.PersonalMail, new { @class = "control-label" })
                            @Html.ValidationMessageFor(m => m.PersonalMail, "", new { @class = "Denied" })
                            @Html.TextBoxFor(m => m.PersonalMail, new { @class = "form-control bg-dark border-grey colorWhite", placeholder = "example@mail.com", autocomplete = "off" })
                        </div>

                    </div>
                    <div class="col-4 border-right  border-grey   bg-dark ">
                        <div class="form-group container">
                            @Html.LabelFor(m => m.WorkEmail, new { @class = " control-label" })
                            @Html.ValidationMessageFor(m => m.WorkEmail, "", new { @class = "Denied" })
                            @Html.TextBoxFor(m => m.WorkEmail, new { @class = "form-control bg-dark border-grey colorWhite", placeholder = "example@softheme.com", autocomplete = "off" })
                        </div>
                    </div>
                </div>
                <div class="row">
                    <!--3-->
                    <div class="col-4 border-left border-right border-grey  bg-dark ">
                        <div class="form-group container">
                            @Html.LabelFor(m => m.Surname, new { @class = "control-label" })
                            @Html.ValidationMessageFor(m => m.Surname, "", new { @class = "Denied" })
                            @Html.TextBoxFor(m => m.Surname, new { @class = "form-control bg-dark border-grey colorWhite", placeholder = "Enter Surname", autocomplete = "off" })
                        </div>

                    </div>

                    <div class="col-4  bg-dark">
                        <div class="form-group container">
                            @Html.LabelFor(m => m.PhoneNumber, new { @class = " control-label" })
                            @Html.ValidationMessageFor(m => m.PhoneNumber, "", new { @class = "Denied" })
                            @Html.TextBoxFor(m => m.PhoneNumber, new { @class = "form-control bg-dark border-grey colorWhite", id = "phonenumber", placeholder = "xxx xxx xxxx", autocomplete = "off" })

                        </div>

                    </div>
                    <div class="col-4 border-right border-grey   bg-dark">
                        <div class="form-group container">
                            @Html.LabelFor(m => m.Skype, new { @class = " control-label" })
                            @Html.ValidationMessageFor(m => m.Skype, "", new { @class = "Denied" })
                            @Html.TextBoxFor(m => m.Skype, new { @class = "form-control bg-dark border-grey colorWhite", placeholder = "userskype", autocomplete = "off" })
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-4 border-left border-right border-grey  bg-dark ">
                        <div class="form-group container">
                            @Html.LabelFor(m => m.JobTitleID, new { @class = "control-label" })
                            @Html.DropDownList("jobTitlesSelectList", null, null, new { @class = "form-control bg-dark border-grey colorWhite", autocomplete = "off" })
                        </div>

                    </div>

                    <div class="col-4  bg-dark">

                        <div class="form-group container">
                            @Html.LabelFor(m => m.HireDate, new { @class = "control-label" })
                            @Html.ValidationMessageFor(m => m.HireDate, "", new { @class = "Denied" })
                            <input class="form-control bg-dark border-grey colorWhite" autocomplete="off" type="date" id="datepickerHireDate" name="HireDate" value="@Model.HireDate.ToString("yyyy-MM-dd")">
                        </div>
                    </div>
                    <div class="col-4 border-right border-grey   bg-dark ">

                        <div class="form-group container">
                            @Html.LabelFor(m => m.DateOfDismissal, new { @class = " control-label" })
                            <input class="form-control bg-dark border-grey colorWhite" autocomplete="off" type="date" id="datepickerDateOfDismissal" name="DateOfDismissal" value="@if (Model.DateOfDismissal != null)
                                                                                                                                                     {
                                                                                                                                                         @Model.DateOfDismissal.Value.ToString("yyyy-MM-dd")
                                                                                                                                                     }">
                        </div>

                    </div>
                </div>
                <div class="row  ">
                    <div class="col-4 border-left border-right border-grey  bg-dark ">
                        <div class="form-group container">
                            @Html.LabelFor(m => m.Status, new { @class = "control-label" })
                            @Html.DropDownList("statusSelectList", null, null, new { @class = "form-control bg-dark border-grey colorWhite", autocomplete = "off" })
                        </div>

                    </div>

                    <div class="col-4  bg-dark">
                        <div class="form-group container">

                        </div>
                    </div>
                    <div class="col-4 border-right border-grey   bg-dark ">
                        <div class="form-group container">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-3 border border-top-0 border-right-0 border-bottom-rounded-left border-grey  bg-dark ">
                        <div class="form-group container">
                            @Html.LabelFor(m => m.VacationBalance, new { @class = "control-label", style = "margin:0" })
                            @Html.ValidationMessageFor(m => m.VacationBalance, "", new { @class = "Denied" })
                            <p style="margin:0;margin-top:17px; color:white;">
                                @Html.TextBoxFor(Model => Model.VacationBalance, new { @class = "form-control bg-dark border-grey", placeholder = "Vacation Balance", style = "border:none; color:white; padding:0; outline:none;box-shadow:none;", @readonly = "true" })
                            </p>
                        </div>
                    </div>
                    <div class="col-1 border border-top-0 border-left-0 border-grey bg-dark ">
                        <a class="change-balance" style="border:none;background-color:#2e2e2e; color:white;padding:0;margin:0;text-decoration: none; cursor:pointer;">
                            <input type="button" data-dismiss="modal" class="form-control bg-dark button-done border-grey bt-gradient float-right" style="cursor:pointer;height:40px !important;width:180px; margin-top:32px;padding-top:6px;"  onclick='ShowBalanceChangePopup("@string.Format($"{Model.EmployeeID}")")' value="CHANGE" />
                        </a>
                    </div>

                    <div class="col-4 border-bottom border-grey  bg-dark">
                        <div class="form-group container ">
                            @Html.Label("temp", new { @class = "control-label invisible" })
                            <input onclick="window.history.back()" type="button" class="form-control bg-dark button-cancel border-grey" style="text-align:center; cursor:pointer;" value="CANCEL" />
                        </div>
                    </div>
                    <div class="col-4 border-right border-bottom border-bottom-rounded-right border-grey   bg-dark ">
                        <div class="form-group container">
                            @Html.Label("temp", new { @class = "control-label invisible" })
                            <input type="submit" onclick="DisableOnClick()" class="form-control bg-dark button-done border-grey bt-gradient" id="Done" style="height:40px !important; padding-top:5px;  cursor:pointer;" value="DONE" />
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal fade" data-backdrop="static" id="BalanceChangeModal" tabindex="-1">
        <div class="modal-dialog">
            <div id="toReplace"></div>
        </div>
    </div>
}
@section Scripts {
    @Scripts.Render("~/Content/dist/jquery-input-mask-phone-number.js")
    <script>
        function ShowBalanceChangePopup(id) {
            var url = "/Admin/BalanceChangePopupPartial?id=" + id;
            $('#BalanceChangeModal').modal();
            $.ajax({
                type: "GET",
                url: url,
                success: function (data) {
                    $("#toReplace").html(data);
                }
            })
        }
        $(function () {
            $('#phonenumber').usPhoneFormat({
                format: '(xxx) xxx-xxxx'
            });
        })
        $(function () {
            $("#inputFile").change(function () {
                readURL(this);
            });
        });
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#imgProfile').attr('src', e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
        function DisableOnClick() {
            setTimeout(function () {
                jQuery('#Done').attr('disabled', true);
            }, 100);
            setTimeout(function () {
                jQuery('#Done').attr('disabled', false);
            }, 2000);
        }
    </script>

}